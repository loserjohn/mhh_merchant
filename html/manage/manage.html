<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>商铺管理</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="../../css/common.css" />
		<link rel="stylesheet" href="../../css/iconfont.css" />
		<style>
			.account {
				width: 100%;
				height: 132px;
				background: linear-gradient(#303030, #000000);
				position: relative;
				overflow: hidden
			}
			
			.bg {
				width: 140px;
				position: absolute;
				right: 0;
				bottom: 0;
			}
			
			.allmaney {
				font-size: 18px;
				line-height: 2;
			}
			
			.quickBtns {
				width: 100%;
				height: 100px;
			}
			
			.quickMenus {
				box-sizing: border-box;
				padding: 0 10px;
			}
			
			.quickMenus .menuPic {
				width: 46px;
				height: 46px;
				margin-top: 27px;
				margin-right: 20px;
			}
			
			.quickMenus .menuTxt {
				line-height: 100px;
				text-align: center;
				color: #212121;
				font-size: 16px;
			}
			
			.otherMenus {
				flex-wrap: wrap;
			}
			
			.menusIcon {
				display: block;
				margin: 10px auto;
				font-size: 22px;
				color: #a8a8a8;
				width: 26px;
				height: 26px;
				/*background: pink;*/
				line-height: 40px;
				/*margin:10px  ;*/
			}
			
			.menus {
				/*background: red;*/
				width: 25%;
				height: 80px;
			}
			
			.bg {
				z-index: 0;
			}
		</style>
	</head>

	<body>
		<div class="" id="app">
			<div class="clearfix" style="position: relative;">

				<header class="mui-bar mui-bar-nav " id="header" style="background: rgba(21,21,21,0);">
					<h1 class="mui-title">商铺管理</h1>
				</header>

				<!--账户-->
				<div class="account" id="content">
					<img src="../../images/logo3.png" alt="" class="bg" />
					<h3 class="cor_w container allmaney">￥{{account}}</h3>
					<p class="cor_g container">小草值：{{score}}</p>
				</div>
				<!--便捷按钮-->
				<div class="quickBtns flex panel main">
					<div class="f1 flex quickMenus " >
						<div href="./deposit.html" hid="deposit" class="flex naviTitle">
							<img src="../../images/demo3.png" alt="" class="menuPic" />
							<p class="menuTxt f1">账户提现</p>
						</div>
					</div>
					<div class="f1 flex  quickMenus">
						<div href="./bill.html" hid="bill" class="flex naviTitle">
							<img src="../../images/demo3.png" alt="" class="menuPic" />
							<p class="menuTxt f1">账目明细</p>
						</div>
					</div>
				</div>

				<!--其他功能-->
				<div class="others panel main">
					<div class="panelTitle">
						其他功能
					</div>
					<ul class="flex otherMenus">
						<li class="menus " >
							<div href="./production/production.html" hid="production" class="navigate">
								<i class="iconfont icon-similarproduct menusIcon cor_g"></i>
								<p class="t_c fs12">作品管理</p>
							</div>
						</li>
						<li class="menus " >
							<div href="./time/time.html" hid="time" class="naviTitle">
								<i class="iconfont icon-shijian menusIcon cor_g"></i>
								<p class="t_c fs12">时间管理</p>
							</div>
						</li>
						<li class="menus " >
							<div href="./orders/orders.html" hid="orders" class="navigate">
								<i class="iconfont icon-fuzhi menusIcon cor_g"></i>
								<p class="t_c fs12">订单管理</p>
							</div>
						</li>
						<li class="menus " >
							<div href="./comment/comment.html" hid="comment" class="naviTitle">
								<i class="iconfont icon-bianji menusIcon cor_g"></i>
								<p class="t_c fs12">评价管理</p>
							</div>
						</li>
						<li class="menus " >
							<div href="./refillcard/refillcard.html" hid="refillcard" class="naviTitle">
								<i class="iconfont icon-huiyuanqia menusIcon cor_g"></i>
								<p class="t_c fs12">充值卡管理</p>
							</div>
						</li>
						<li class="menus " >
							<div href="./coupons/coupons.html" hid="coupons" class="naviTitle">
								<i class="iconfont icon-qiaquan menusIcon cor_g"></i>
								<p class="t_c fs12">优惠券管理</p>
							</div>
						</li>
						<li class="menus " >
							<div href="./personSet/personSet.html" hid="personSet" class="naviTitle">
								<i class="iconfont icon-shezhi menusIcon cor_g"></i>
								<p class="t_c fs12">个人设置</p>
							</div>
						</li>
						<!--<li class="menus ">
							<a href="./custom/custom.html" hid="custom">
								<i class="iconfont icon-geren menusIcon cor_g"></i>
								<p class="t_c fs12">顾客档案</p>
							</a>
						</li>-->

						<li class="menus " >
							<div href="./share/share.html" hid="share" class="naviTitle">
								<i class="iconfont icon-geren menusIcon cor_g"></i>
								<p class="t_c fs12">店铺分享</p>
							</div>
						</li>
						<!--<li class="menus " >
							 <a href="./share/share.html" hid="share"> 
								<i class="iconfont icon-xinxi menusIcon cor_g"></i>
								<p class="t_c fs12">商户须知</p>
							 </a> 
						</li>-->
						<li class="menus " >
							<div href="./kefu.html" hid="kefu"  class="naviTitle">
								<i class="iconfont icon-service1 menusIcon cor_g"></i>
								<p class="t_c fs12">平台客服</p>
							</div>
						</li>
						<!--<li class="menus ">
							<a href="">
								<i class="iconfont icon-mudedi menusIcon cor_g"></i>
								<p class="t_c fs12">新手引导</p>
							</a>
						</li>-->
						<li class="menus " >
							<div href="./banks/banks.html" hid="banks" class="naviTitle">
								<i class="iconfont icon-bangdingyinhangqia   menusIcon cor_g"></i>
								<p class="t_c fs12">银行卡管理</p>
							</div>
						</li>
						<li class="menus ">
							<!--<a href="">-->
								<i class="iconfont icon-more menusIcon cor_g"></i>
								<p class="t_c fs12">马嘿嘿努力中</p>
							<!--</a>-->
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script src="../../js/mui.min.js"></script>
	
		<script src="../../js/app.js"></script>
		<script src="../../js/vue.js"></script>
		<script src="../../js/aes.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			var APP ;
			mui.plusReady(function() {
				app.WXinit(CryptoJS)
				app.initHeader();
				 APP = new Vue({
					el: '#content',
					data: {
						account: '',
						score: '',
						num:''
					},
					mounted() {
						var _this = this
						//							this._getData()
						mui.init({
							swipeBack: false,
							pullRefresh: {
								container: "#app", //下拉刷新容器标识，querySelector能定位的css选择器均可，比如：id、.class等
								down: {
									style: 'circle', //必选，下拉刷新样式，目前支持原生5+ ‘circle’ 样式
									color: '#2BD009', //可选，默认“#2BD009” 下拉刷新控件颜色
									height: '50px', //可选,默认50px.下拉刷新控件的高度,
									range: '100px', //可选 默认100px,控件可下拉拖拽的范围
									offset: '0px', //可选 默认0px,下拉刷新控件的起始位置
									auto: false, //可选,默认false.首次加载自动上拉刷新一次
									callback: () => {
										//										alert(2)
										_this._getData(() => {
											mui.later(() => {
												mui('#app').pullRefresh().endPulldown();
											}, 1000)
										})
									} //必选，刷新函数，根据具体业务来编写，比如通过ajax从服务器获取新数据；
								}
							}
						});
						
						this._getData()
						mui('.main').on('tap', '.navigate', function() {
							var desturl = this.getAttribute('href')
							var destid = this.getAttribute('hid')

							if(!desturl || desturl.length == 0 || desturl == '#' || !destid) {
								return false
							}														
							mui.openWindow({
								url: desturl,
								id: destid,
								styles: {
									top: '0px', //新页面顶部位置
									bottom: '0px', //新页面底部位置
									scrollIndicator: "none",
									plusrequire: 'ahead'
								},
								createNew: true, //是否重复创建同样id的webview，默认为false:不重复创建，直接显示
								show: {
									autoShow: true, //页面loaded事件发生后自动显示，默认为true
									duration: 300 //页面动画持续时间，Android平台默认100毫秒，iOS平台默认200毫秒；
								},
								extras: {
									account: _this.account,
									num:_this.num
								},
								waiting: {
									autoShow: false, //自动显示等待框，默认为true
									title: '正在加载...', //等待对话框上显示的提示内容
								}
							})
						});
						
						mui('.main').on('tap', '.naviTitle', function() {
							var desturl = this.getAttribute('href')
							var destid = this.getAttribute('hid')
							mui.openWindow({
								url: desturl,
								id: destid,
								styles: {
									top: '0px', //新页面顶部位置
									bottom: '0px', //新页面底部位置
									scrollIndicator: "none",
									plusrequire: 'ahead',
									// 窗口参数 参考5+规范中的WebviewStyle,也就是说WebviewStyle下的参数都可以在此设置
									titleNView: { // 窗口的标题栏控件
										autoBackButton: true,// 标题栏文字,当不设置此属性时，默认加载当前页面的标题，并自动更新页面的标题
										titleColor: "#fff", // 字体颜色,颜色值格式为"#RRGGBB",默认值为"#000000"
										titleSize: "14px", // 字体大小,默认17px
										backgroundColor: "#151515", // 控件背景颜色,颜色值格式为"#RRGGBB",默认值为"#F7F7F7"
										progress: { // 标题栏控件的进度条样式
											color: "#ccaa42", // 进度条颜色,默认值为"#00FF00"  
											height: "2px" // 进度条高度,默认值为"2px"         
										},
										splitLine: { // 标题栏控件的底部分割线，类似borderBottom
											color: "#404040", // 分割线颜色,默认值为"#CCCCCC"  
											height: "1px" // 分割线高度,默认值为"2px"
										}
									}
								},
								createNew: false, //是否重复创建同样id的webview，默认为false:不重复创建，直接显示
								show: {
									autoShow: true, //页面loaded事件发生后自动显示，默认为true
									duration: 300 //页面动画持续时间，Android平台默认100毫秒，iOS平台默认200毫秒；
								},
								extras: {
									account: _this.account,
									num:_this.num
								},
								waiting: {
									autoShow: false, //自动显示等待框，默认为true
									title: '正在加载...', //等待对话框上显示的提示内容
								}
							})
						})
						
						
						
					},
					methods: {
						/*跳转页面*/
						
						/*加载数据*/
						_getData(callback) {
//							alert(app.mark + plus.storage.getItem('token'))
//							plus.nativeUI.toast('欢迎登陆')
							var _this = this
							app.ajax(app.baseUrl + '/api/BusiAccount/GetAccountInfo', {
								//							data: Info,
								// dataType:'json',//服务器返回json格式数据
								type: 'get', //HTTP请求类型
								success: function(result) {
									/*登陆成功*/
									if(result.Success) {
										_this.account = result.Data.SHOP.SHOP_AMOUNT;
										_this.score = result.Data.SHOP.INTEGRAL;
										_this.num = result.Data.ACCOUNT_MOBILE
										if(callback) callback();
									} else {
										/*验证失败*/
										if(callback) callback(false, result.Msg)

									}
								}
							});
						},
						/*刷新数据*/
						_refreshfn() {
//															alert(1)
							plus.nativeUI.showWaiting()
							this._getData(() => {
								mui.later(() => {
									plus.nativeUI.closeWaiting()
								}, 1500)
							})
						}
						
					}
				})

			});
			function initPage(){
				APP._getData(()=>{})
			}
		</script>
	</body>

</html>